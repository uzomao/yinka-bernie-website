<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Yinka Bernie Intimate Show</title>
	<link rel="stylesheet" href="style.css" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Merriweather|Oswald" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
</head>
<body>
	<header>
		<img src="logo.jpg" alt="Yinka Bernie Intimate Show Logo">
		<i class="fas fa-volume-up" style="display: none"></i>
		<i class="fas fa-volume-mute"></i>
	</header>

	<main>
		<div>
			<p id="lyrics" class="lyrics"></p>
		</div>

		<!-- <embed src="oomph.mp3" width="180" height="90" loop="true" autostart="true" hidden="true" /> -->
		<audio id="sound" src="" type="audio/mp3"></audio>

	</main>

	<footer>
		<h1><a href="#" id="rsvp">RSVP <i class="fas fa-envelope"></i></a></h1>
		<form method="post" id="rsvp_form">
			<input type="text" id="rsvp_email" name="email" placeholder="Enter your email to RSVP" autocomplete="off" />
			<input type="submit" />
		</form>
	</footer>

	<script>
		$(document).ready(function(){

			var lyrics = [
				{text: "You don't call me no more, you don't text me no more", sound: 'music/again.mp3'},
				{text: "Chilling on a Monday rolling up the dope", sound: 'music/mondays.mp3'},
				{text: "She ridiculous, body like a goddess damn she dangerous", sound: 'music/rockstar.mp3'},
				{text: "Aye o le no try rush am. Try to do your things more logical", sound: 'music/balance.mp3'},
				{text: "We spend this money, we don't give a fuck", sound: "music/you_need.mp3"}
			];
			var i = 0;

			$('#lyrics').text(getLyric(0));

			setInterval(function(){
				$('#lyrics').text(getLyric(i)).animate({
					opacity: 0
				}, 6000, function(){
					$(this).css("opacity", 1);
					i++;
					if(i == lyrics.length){
						i = 0;
					}
				});
			}, 6000);

			$('.fa-volume-up').click(function(){
				$(this).css('display', 'none');
				$('.fa-volume-mute').css('display', 'inline-block')
				
				var audio = $('#sound');
				audio[0].load();
				audio[0].oncanplaythrough = audio[0].play();
			});

			$('.fa-volume-mute').click(function(){
				$(this).css('display', 'none');
				$('.fa-volume-up').css('display', 'inline-block');
				$('#sound')[0].pause();
			});

			function getLyric(i){
				var audio = $('#sound');

				audio.attr("src", lyrics[i].sound);
				audio[0].pause();
				audio[0].load();

				audio[0].oncanplaythrough = audio[0].play();

				return lyrics[i].text;
			}

			$('#rsvp').click(function(){
				$(this).css({
					"display": "inline",
					"float": "left",
					"transition": "all 2s ease-out"
				});
				$('input').css('display', 'inline')
			})

			$('#rsvp_form').submit(function(){
				var email = $('#rsvp_email').val();
				$.post('https://yinka-bernie-emails.herokuapp.com/submit/'+email, function(data){
					console.log('success');
				})
				event.preventDefault();
			})

		});
	</script>
</body>
</html>