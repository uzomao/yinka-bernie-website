<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Yinka Bernie Intimate Show</title>
	<link rel="stylesheet" href="style.css" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Merriweather|Oswald" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
</head>
<body>
	<header>
		<img src="logo.jpg" alt="Yinka Bernie Intimate Show Logo">
		<i class="fas fa-volume-up" style="display: none"></i>
		<i class="fas fa-volume-mute"></i>
	</header>

	<div class="main">
		<p id="lyrics" class="lyrics"></p>
		<ul>
			<span>BERNIE-BOARD 9000</span>
			<li id="first" class="white" data-index=0></li>
			<li class="black"></li>
			<li data-index=1 class="white"></li>
			<li class="black"></li>
			<li data-index=2 class="white"></li>
			<li class="black"></li>
			<li data-index=3 class="white"></li>
			<li class="black"></li>
			<li id="last" class="white" data-index=4></li>
		</ul>
		<p id="instructions"><small>*press keys to play*</small></p>
	</div>

	<audio id="sound" src="" type="audio/mp3" onended="clearText()"></audio>

	<footer>
		<h1><a href="#" id="rsvp">RSVP <i class="fas fa-envelope"></i></a></h1>
		<form method="post" id="rsvp_form">
			<input type="text" id="rsvp_email" name="email" placeholder="Enter your email to RSVP" autocomplete="off" />
			<input type="submit" />
		</form>
	</footer>

	<script>
		$(document).ready(function(){

			
			var lyrics = [
				{text: "You don't call me no more, you don't text me no more", sound: 'music/again.mp3'},
				{text: "Chilling on a Monday rolling up the dope", sound: 'music/mondays.mp3'},
				{text: "She ridiculous, body like a goddess damn she dangerous", sound: 'music/rockstar.mp3'},
				{text: "Aye o le no try rush am. Try to do your things more logical", sound: 'music/balance.mp3'},
				{text: "We spend this money, we don't give a fuck", sound: "music/you_need.mp3"}
			];
			var i = 0;

			$('li').click(function(){
				$('#lyrics').text(getLyric($(this)[0]['dataset'].index));
			});

			clearText = function(){
				$('#lyrics').text('');
			}

			$('.fa-volume-up').click(function(){
				$(this).css('display', 'none');
				$('.fa-volume-mute').css('display', 'inline-block')
				
				var audio = $('#sound');
				audio[0].load();
				audio[0].oncanplaythrough = audio[0].play();
			});

			$('.fa-volume-mute').click(function(){
				$(this).css('display', 'none');
				$('.fa-volume-up').css('display', 'inline-block');
				$('#sound')[0].pause();
			});

			function getLyric(i){
				var audio = $('#sound');

				audio.attr("src", lyrics[i].sound);
				audio[0].pause();
				audio[0].load();

				audio[0].oncanplaythrough = audio[0].play();

				return lyrics[i].text;
			}

			$('#rsvp').click(function(){
				$(this).css({
					"display": "inline",
					"float": "left",
					"padding-left": "10px",
					"transition": "all 2s ease-out"
				});
				$('input').css('display', 'inline')
			})

			$('#rsvp_form').submit(function(){
				var email = $('#rsvp_email').val();
				$.post('https://yinka-bernie-emails.herokuapp.com/submit/'+email);
				event.preventDefault();
				$('footer').html('<h1>SEE YOU AT THE SHOW!</h1>');
			})

		});
	</script>
</body>
</html>